(function(){let e=this,t=e.document,r=Object.create(null),n=Object.create(null),o=t.currentScript.src.substr(0,t.currentScript.src.lastIndexOf("/")+1);t.body.insertAdjacentHTML("beforeend",'<iframe id=sleeknote-frame style="display:none!important" aria-hidden="true"></iframe>');let i=t.body.lastElementChild.contentWindow;function a(e){let a=i.Promise.resolve();return r[e]||(a=new i.Promise(((r,i)=>{if(n[e])n[e].resolve.push(r),n[e].reject.push(i);else{n[e]={resolve:[r],reject:[i]};let a=o,l=t.createElement("script");l.src=a+(~e.indexOf(".js")?e:e+".js"),l.name=e,l.async=!0,l.charset="utf-8",t.head.appendChild(l),l.onload=function(){n[e].resolve.forEach((e=>{e()}))},l.onerror=function(t){throw n[e].reject.forEach((e=>{e()})),new Error("Error loading: "+t.currentTarget.src)}}}))),a.then((()=>r[e]))}let l=new i.URL(e.location),c=new i.URLSearchParams(l.search);if(c.has("snlocal")){c.delete("snlocal"),e.history.replaceState(null,null,t.location.origin+t.location.pathname+"?"+c.toString());let r=t.createElement("script");return r.charset="utf-8",r.src="https://local.sleeknote.com/frontend2/core.js",void t.head.appendChild(r)}if(!o.includes("local.sleeknote.com")){let e=t.currentScript.src.split("/").pop().split(".")[0];o+=(e.split("-")[1]||"production")+"/"}function s(e){return new i.Promise((t=>{!function(e,t){i.Promise.all(e.map(a)).then((e=>{t&&t.apply(this,e)}))}([e],(function(e){return t(e)}))}))}e.arequire=s,e.sndefine=function(...n){var o="string"==typeof n[0]?n.shift():t.currentScript.name,l=Array.isArray(n[0])?n.shift():[],c=n[0];r[o]||(r[o]=i.Promise.resolve().then((()=>i.Promise.all(l.map(a)).then((t=>c.apply(e,t))))))},this.SleekNote||(this.SleekNote={}),this.SleekNote.root=o,s("package-core-boot").then((async function({launcher:e,SleekNote:t,emit:r,API:n,CONST:i,storage:a,B:l}){let c=this;await a.postCreate(),t.preview&&await c.Promise.all([import(o+"preview-utils.js"),import(o+"preview-toolbar.js")]).then((async function(e){let[{default:r},{default:n}]=e,o=await r.fetchHTMLConfig(t.preview);t.CustomerId=o.CustomerId,t.HideSleeknoteBadge=!0,t.SleekNotes=o,l.is.desktop&&n(o[0],t)})),c.SleekNote.API=n,await r(i.CORE.EVENTS.LOAD,(function(e){try{return n.apply(null,arguments)}catch(e){console.warn("Error calling Sleeknote API",e)}})),c.SleekNote.triggerOnclick=c.SleekNote.triggerOnClick=async function(t,r,o){let i=await e.loadForLaunch(t,r);if(i)return o||(o=i.first("form")),i.notes[o]?n("open",t,o):void console.warn("noteName ",o," does not exist in ",i)},(await e.add(t.SleekNotes)).length||s("package-tracker"),function(){try{return c.location!==c.parent.location}catch(e){}}()&&c.parent.postMessage(c.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*")}))}).call(this);